#!/usr/bin/env php
<?php
/**
 * @copyright 2017 Aleksander Stelmaczonek <al.stelmaczonek@gmail.com>
 * @license   MIT License, see license file distributed with this source code
 */

use Koriit\PHPCircle\PHPCircleApplication;
use Koriit\PHPCircle\PHPCircleDependencies;
use Koriit\PHPCircle\Application\EntryPoint;

foreach ([__DIR__ . '/../../autoload.php', __DIR__ . '/../vendor/autoload.php', __DIR__ . '/vendor/autoload.php'] as $file) {
    if (file_exists($file)) {
        define('PHPCIRCLE_COMPOSER_INSTALL', $file);

        break;
    }
}

unset($file);

if (!defined('PHPCIRCLE_COMPOSER_INSTALL')) {
    fwrite(STDERR,
           'You need to set up the project dependencies using Composer:' . PHP_EOL . PHP_EOL .
           '    composer install' . PHP_EOL . PHP_EOL .
           'You can learn all about Composer on https://getcomposer.org/.' . PHP_EOL
    );

    die(1);
}

require PHPCIRCLE_COMPOSER_INSTALL;

$entryPoint = new EntryPoint();
$entryPoint->enter(PHPCircleApplication::class, new PHPCircleDependencies());
